{# Reusable macro for rendering nested lists (map syntax + legacy object syntax) #}
{% macro renderItems(items, ordered) %}
<{{ "ol" if ordered else "ul" }}>
  {% for item in items %}
  <li>
    {% if item is mapping %}
      {% for key, children in item %}
        {{ key }}
        <ul>
          {% for sub in children %}<li>{{ sub }}</li>{% endfor %}
        </ul>
      {% endfor %}
    {% elif item.text %}
      {{ item.text }}
      {% if item.sub_items %}
      <ul>
        {% for sub in item.sub_items %}<li>{{ sub }}</li>{% endfor %}
      </ul>
      {% endif %}
    {% else %}
      {{ item }}
    {% endif %}
  </li>
  {% endfor %}
</{{ "ol" if ordered else "ul" }}>
{% endmacro %}
